---
toc: 'content'
title: 'Todo List å¾…åŠäº‹é¡¹'
---

# Todo List å¾…åŠäº‹é¡¹

æœ¬æ•™ç¨‹å°†å¼•å¯¼ä½ é€æ­¥å®ç°ä¸€ä¸ªç®€å•çš„ä»£åŠäº‹é¡¹æ¸…å•ï¼ˆ Todo List ï¼‰ï¼Œ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åˆ©ç”¨ KWC æä¾›çš„**åŸºç¡€ç»„ä»¶**ï¼ˆå¦‚è¾“å…¥æ¡†ã€æŒ‰é’®ï¼‰ï¼Œåƒæ­ç§¯æœ¨ä¸€æ ·å°è£…å‡ºå±äºä½ è‡ªå·±çš„**ä¸šåŠ¡ç»„ä»¶**ï¼Œå¹¶è®©å®ƒä»¬ååŒå·¥ä½œã€‚

### ä½ å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿ

é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œä½ å°†æŒæ¡ä»¥ä¸‹å†…å®¹ï¼š

1. **ç»„ä»¶ç»„åˆä¸å°è£…**ï¼š ä¸éœ€è¦é‡å¤é€ è½®å­ï¼Œå­¦ä¹ å¦‚ä½•åŸºäº KWC çš„åŸºç¡€ç»„ä»¶ï¼ˆ`kd-input`, `kd-button`ï¼‰è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œæ„å»ºå‡º `CreateForm` ç­‰è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶ï¼›
2. **ç»„ä»¶é—´é€šä¿¡**ï¼š ç†è§£ â€œå•å‘æ•°æ®æµâ€ â€”â€”çˆ¶ç»„ä»¶é€šè¿‡ Props å‘ä¸‹ä¼ é€’æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡ Events å‘ä¸Šå‘é€æŒ‡ä»¤ï¼›

### å®ç°çš„æ˜¯ä»€ä¹ˆç¨‹åºï¼Ÿ

æœ¬æ•™ç¨‹å°†ä½¿ç”¨ KWC å®ç°ä¸€ä¸ªäº¤äº’å¼çš„ä»£åŠäº‹é¡¹æ¸…å•ï¼Œä»¥ä¸‹æ˜¯åŠŸèƒ½ç‚¹ä¸æ•ˆæœé¢„è§ˆï¼š

1. **æ·»åŠ ä»»åŠ¡**ï¼šè¾“å…¥æ–‡å­—æŒ‰å›è½¦æˆ–ç‚¹â€œæ·»åŠ â€ï¼Œåˆ—è¡¨å³åˆ»æ›´æ–°ã€‚
2. **çŠ¶æ€åˆ‡æ¢**ï¼šå‹¾é€‰ä»»åŠ¡åï¼Œæ–‡å­—è‡ªåŠ¨å‡ºç°åˆ é™¤çº¿æ•ˆæœã€‚
3. **ç¼–è¾‘åŠŸèƒ½**ï¼šç‚¹å‡»â€œç¼–è¾‘â€æŒ‰é’®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œä¸”è¾“å…¥æ¡†é¢„å¡«äº†åŸæœ‰å†…å®¹ã€‚
4. **åˆ é™¤ä»»åŠ¡**ï¼šç‚¹å‡»åˆ é™¤ï¼Œå¯¹åº”æ¡ç›®å¹³æ»‘ç§»é™¤ã€‚

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šæœ€ç»ˆæ•ˆæœé¢„è§ˆé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a30e09c0db14c9eaac6e1)

---

### ç¯å¢ƒé…ç½®

åœ¨å¼€å§‹ç¼–è¾‘æœ¬æ•™ç¨‹ä»£ç å‰ï¼Œéœ€è¦æå‰é…ç½®å¥½å¼€å‘ç¯å¢ƒï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰é…ç½®ï¼Œå¯ä»¥å‚è€ƒâ€œå¿«é€Ÿå…¥é—¨-å®‰è£…éƒ¨ç½²â€ä¸­çš„æ­¥éª¤å®‰è£…ç›¸å…³ä¾èµ–ï¼š

1. å®‰è£… Node.js ä¸ git
2. åœ¨ VSCode ä¸­è¾“å…¥ `Ctrl + `å‘¼å‡ºç»ˆç«¯ï¼Œè¾“å…¥`npm install -g yarn` æˆ– `npm install pnpm -g` å®‰è£…åŒ…ç®¡ç†å™¨
3. ä½¿ç”¨`npm install -g @kdcloudjs/kd-custom-control-cli` å®‰è£…è„šæ‰‹æ¶
4. ä½¿ç”¨` kd-custom-control-cli create <è‡ªå®šä¹‰æ§ä»¶æ–¹æ¡ˆ>` å¦‚`kd-custom-control-cli create mycontrol`åˆ›å»ºä¸€ä¸ª åä¸º` mycontrol` çš„è‡ªå®šä¹‰æ§ä»¶é¡¹ç›®
5. ä½¿ç”¨ `npm install` å®‰è£…ä¾èµ–
6. ä½¿ç”¨ `npm start` å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹è¿è¡Œæ•ˆæœ

---

### ç»„ä»¶ç»“æ„è®¾è®¡æ¦‚è§ˆ

é¡¹ç›®è¿è¡Œèµ·æ¥åï¼Œä½ ä¼šå‘ç°åœ¨ src ä¸­æœ‰ app è¿™ä¸ªæ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº† app.cssï¼Œapp.htmlï¼Œapp.js è¿™ä¸‰ä¸ªæ–‡ä»¶ï¼Œç»„æˆäº†æœ¬é¡¹ç›®çš„æ ¹å®¹å™¨ï¼Œè´Ÿè´£æ‹¼è£…å„ä¸ªç»„ä»¶å’Œé¡µé¢çš„æ•´ä½“å¸ƒå±€è®¾è®¡ï¼›

å¦‚æœå°†æœ¬é¡¹ç›®çš„æ‰€æœ‰ä»£ç éƒ½å†™åœ¨ app ä¸­ï¼Œè¿™ä¼šè®© app ç»„ä»¶å˜å¾—éå¸¸åºå¤§ï¼Œéš¾ä»¥ç»´æŠ¤ä¸å¤ç”¨ï¼Œè¿™æ ·ä¹Ÿä¼šå¤±å»ä½¿ç”¨ KWC çš„æ„ä¹‰ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹æ³•æ˜¯å°†ä¸åŒåŠŸèƒ½å°è£…æˆç»„ä»¶ï¼Œæœ€åå†æŠŠä»–ä»¬ç»“åˆèµ·æ¥ã€‚æœ¬æ•™ç¨‹ä¼šè‡ªå®šä¹‰ä»¥ä¸‹å››ä¸ªç»„ä»¶æ¥æ”¯æ’‘å¾…åŠäº‹é¡¹çš„æ­å»ºï¼š

- **todoWrapper (æ€»æŒ‡æŒ¥)**: æŒæœ‰æ‰€æœ‰æ•°æ®ï¼Œå¤„ç†å¢åˆ æ”¹é€»è¾‘ã€‚
- **createForm (è¾“å…¥æ¡†)**: è´Ÿè´£æ”¶é›†ç”¨æˆ·è¾“å…¥ï¼Œå‘Šè¯‰æ€»æŒ‡æŒ¥â€œåŠ æ–°ä»»åŠ¡â€ã€‚
- **todo (åˆ—è¡¨é¡¹)**: è´Ÿè´£å±•ç¤ºå•æ¡ä»»åŠ¡ã€‚
- **editForm (ç¼–è¾‘æ¡†)**: ä»…åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹å‡ºç°ï¼Œè´Ÿè´£ä¿®æ”¹ä»»åŠ¡ã€‚

å…¶ä¸­ç»„ä»¶çš„æ–‡ä»¶å¤¹åŠå…¶æ–‡ä»¶å¿…é¡»éµå¾ªä»¥ä¸‹å‘½åè§„åˆ™ï¼š

- å¿…é¡»ä»¥å°å†™å­—æ¯å¼€å¤´
- åªèƒ½åŒ…å«å­—æ¯æ•°å­—æˆ–ä¸‹åˆ’çº¿å­—ç¬¦
- åœ¨å‘½åç©ºé—´ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„
- ä¸èƒ½åŒ…å«ç©ºæ ¼
- ä¸èƒ½ä»¥ä¸‹åˆ’çº¿ç»“å°¾
- ä¸èƒ½åŒ…å«ä¸¤ä¸ªè¿ç»­çš„ä¸‹åˆ’çº¿
- ä¸èƒ½åŒ…å«è¿å­—ç¬¦ï¼ˆ-ï¼‰

**æ³¨æ„ï¼šæ¯ä¸ªç»„ä»¶éœ€è¦ç›´æ¥ä¿å­˜åœ¨ src/modoules ä¸‹ï¼Œä¸èƒ½åœ¨ä¸€ä¸ªç»„ä»¶æ–‡ä»¶å¤¹ä¸­åµŒå¥—å¦ä¸€ä¸ªç»„ä»¶ï¼›**

---

### èƒŒæ™¯ä¸æ ‡é¢˜

æ–°å¢è‡ªå®šä¹‰ç»„ä»¶ï¼šåœ¨ app ç›®å½•ä¸‹æ–°å»ºç»„ä»¶æ–‡ä»¶å¤¹ todoWrapperï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º todoWrapper.cssï¼ŒtodoWrapper.htmlï¼ŒtodoWrapper.js ä¸‰ä¸ªæ–‡ä»¶ï¼Œæœ€ç»ˆæ–‡ä»¶ç»“æ„ç›®å½•å¦‚ä¸‹ï¼š

```bash
src/
  â””â”€â”€ modules/mycontrol
      â””â”€â”€ â”œâ”€â”€ app/
          â”‚   â”œâ”€â”€ app.css
          â”‚   â”œâ”€â”€ app.html
          â”‚   â””â”€â”€ app.js
          â””â”€â”€ todoWrapper/
              â”œâ”€â”€ todoWrapper.css
              â”œâ”€â”€ todoWrapper.html
              â””â”€â”€ todoWrapper.js
```

åœ¨ todoWrapper.html ä¸­ä¸ºè¯¥ç»„ä»¶çš„å®¹å™¨èµ‹äºˆä¸€ä¸ªåä¸ºâ€œwrapperâ€çš„ classname å¹¶åœ¨å®¹å™¨ä¸­æ·»åŠ â€œå¾…åŠäº‹é¡¹â€æ ‡é¢˜ï¼ŒtodoWrapper.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="wrapper">
    <h1>å¾…åŠäº‹é¡¹</h1>
  </div>
</template>
```

åœ¨ todoWrapper.css ä¸­æ·»åŠ è¯¥ç»„ä»¶çš„çš„èƒŒæ™¯è‰²ç­‰æ ·å¼å†…å®¹ï¼ŒtodoWrapper.css ä»£ç å¦‚ä¸‹ï¼š

```css
.wrapper {
  width: 450px;
  padding: 30px;
  background-color: #1a1a40;
  border-radius: 5px;
  text-align: center;
}
```

åœ¨ todoWrapper.js ä¸­é¢„å…ˆç»§æ‰¿`KingdeeElement` åŸºç±»ï¼Œå£°æ˜ä¸€ä¸ªç©ºçš„ Javascript ç±»ï¼Œä¸ºåç»­æ·»åŠ æ•°æ®çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘æ–¹æ³•æ‰“ä¸‹åŸºç¡€ï¼ŒtodoWrapper.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»åˆæ­¥å®Œæˆäº† todoWrapper è¿™ä¸ªç»„ä»¶çš„å°è£…ï¼Œæ¥ä¸‹æ¥å°±è¯•è¯•æŠŠä»–ç»„è£…åˆ° app ä¸­å§ ï¼
åŒæ ·çš„ï¼Œæˆ‘ä»¬åœ¨ app.html ä¸­æ·»åŠ å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨ä¸­é€šè¿‡`<mycontrol-todo-wrapper></mycontrol-todo-wrapper>`å¯¼å…¥æˆ‘ä»¬å·²ç»å°è£…å¥½çš„ç»„ä»¶ï¼Œapp.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="page-container">
    <mycontrol-todo-wrapper></mycontrol-todo-wrapper>
  </div>
</template>
```

ä¸ºäº†ç•Œé¢ç¾è§‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ app.css ä¸­å®šä¹‰æ•´ä¸ªé¡µé¢çš„æ ·å¼ï¼Œapp.css ä»£ç å¦‚ä¸‹ï¼š

```css
.page-container {
  background-color: #3b36cc;
  color: white;
  display: flex;
  flex-direction: row;
  justify-content: center;
  font-family: sans-serif;
  min-height: 100vh;
  width: 100%;
  padding-top: 20px;
}
```

åŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ app.js ä¸­é¢„å…ˆç»§æ‰¿`KingdeeElement` åŸºç±»ï¼Œapp.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {}
```

ç›®å‰æˆ‘ä»¬å·²ç»å®Œæˆäº†é¡µé¢æ•´ä½“èƒŒæ™¯æ ·å¼å’Œæ ‡é¢˜å†…å®¹çš„æ­å»ºï¼Œåœ¨ VSCode ä¸­è¾“å…¥ `Ctrl + `å‘¼å‡ºç»ˆç«¯ï¼Œä½¿ç”¨`npm start`å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹è¿è¡Œæ•ˆæœï¼š

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šé¢„è§ˆæ ‡è®°ä¸æ ‡é¢˜æ•ˆæœé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a313784aa6b1f690b2a4e)

---

### å®šä¹‰ createForm ç»„ä»¶

æ–°å¢ createForm è¾“å…¥æ¡†ç»„ä»¶ï¼šåœ¨ app ç›®å½•ä¸‹æ–°å»ºç»„ä»¶æ–‡ä»¶å¤¹ createFormï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º createForm.cssï¼ŒcreateForm.htmlï¼ŒcreateForm.js ä¸‰ä¸ªæ–‡ä»¶ï¼Œæœ€ç»ˆæ–‡ä»¶ç»“æ„ç›®å½•å¦‚ä¸‹ï¼š

```bash
src/
  â””â”€â”€ modules/mycontrol
      â””â”€â”€ â”œâ”€â”€ app/
          â”‚   â”œâ”€â”€ app.css
          â”‚   â”œâ”€â”€ app.html
          â”‚   â””â”€â”€ app.js
          â””â”€â”€ todoWrapper/
          â”‚   â”œâ”€â”€ todoWrapper.css
          â”‚   â”œâ”€â”€ todoWrapper.html
          â”‚   â””â”€â”€ todoWrapper.js
          â”œâ”€â”€ createForm/
          â”‚   â”œâ”€â”€ createForm.css
          â”‚   â”œâ”€â”€ createForm.html
          â”‚   â””â”€â”€ createForm.js


```

åœ¨ createForm.html ä¸­ï¼Œ é€šè¿‡å°† KWC çš„åŸºç¡€ç»„ä»¶ `kd-input` å’Œ `kd-button` ç»„åˆåœ¨ `form` å®¹å™¨ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç›´è§‚çš„ä»»åŠ¡å½•å…¥ç•Œé¢ã€‚  
å› ä¸ºè¾“å…¥æ¡†æ˜¯éœ€è¦æ˜¾ç¤ºå†…å®¹çš„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜è¦é€šè¿‡`value={content}`å°†è¾“å…¥çš„èµ„æ–™å†…å®¹ä¼ ç»™è¾“å…¥æ¡†ï¼ŒåŒæ—¶ç›‘å¬è¾“å…¥å˜åŒ–ï¼Œ é€šè¿‡æ‰§è¡Œå‡½æ•°å°†ç”¨æˆ·æœ€æ–°çš„è¾“å…¥å­˜å›å˜é‡ï¼Œç”¨æ¥æ›´æ”¹å†…å®¹ï¼ŒcreateForm.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <form class="create-form">
    <kd-input
      type="text"
      class="input-field"
      placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹"
      value={content}
      onchange={handleInputChange}
    ></kd-input>
    <kd-button type="submit" class="submit-btn">æ·»åŠ </kd-button>
  </form>
</template>
```

æ¥ç€åœ¨ createForm.css ä¸­ï¼Œ é€šè¿‡å¯¹ `kd-input` å’Œ `kd-button` çš„æ ·å¼å˜é‡è¿›è¡Œè¦†ç›–ï¼Œå»é™¤äº†åŸç”Ÿè¾¹æ¡†å¹¶ç»Ÿä¸€äº†é…è‰²ï¼Œä½¿åŸºç¡€ç»„ä»¶èƒ½å¤Ÿå®Œç¾èå…¥è‡ªå®šä¹‰çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼ŒcreateForm.css ä»£ç å¦‚ä¸‹ã€‚

```css
.create-form {
  height: 40px;
  width: 100%;
  margin: 25px 0px;
  border: 1px solid #3b36cc;
  display: flex;
}
.input-field {
  width: 100%;
  --kdds-c-input-background: none;
  --kdds-c-input-value-color: white;
  --kdds-c-input-border: transparent;
  --kdds-c-input-padding-vertical-medium: 8px;
}
.submit-btn {
  --kdds-c-button-padding-vertical-medium: 8px;
  --kdds-c-button-primary-background: #3b36cc;
  --kdds-c-button-primary-border: #3b36cc;
}
```

åœ¨ createForm.js ä¸­ç»§æ‰¿`KingdeeElement` åŸºç±»ï¼Œåœ¨è¿™æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªåˆå§‹ä¸ºç©ºå­—ç¬¦ä¸²çš„å˜é‡ contentï¼Œç”¨æ¥å­˜åœ¨ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­æ‰“å‡ºçš„æ¯ä¸€ä¸ªå­—ï¼Œå¹¶é€šè¿‡`handleInputChange(event)`äº‹ä»¶å¤„ç†å‡½æ•°æ¥æ•è·è¾“å…¥å¹¶æ›´æ–°ï¼ŒcreateForm.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  content = '';

  handleInputChange(event) {
    this.content = event.target.value;
  }
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå·²ç»åˆæ­¥å®Œæˆäº† createForm ç»„ä»¶çš„å®šä¹‰ï¼Œä½†æ˜¯ä¸ºäº†ä½¿å¾—å…¶ç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡`<mycontrol-create-form></mycontrol-create-form>`æŠŠä»–å¼•å…¥åˆ° todoWrapper ç»„ä»¶ä¸­ï¼Œ å®ç°ç»„ä»¶çš„åµŒå¥—ä¸åŠŸèƒ½é›†æˆï¼ŒtodoWrapper.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="wrapper">
    <h1>å¾…åŠäº‹é¡¹</h1>
    <mycontrol-create-form></mycontrol-create-form>
  </div>
</template>
```

ä½¿ç”¨ `npm start`å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹å½“å‰çš„è¿è¡Œæ•ˆæœï¼š

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šé¢„è§ˆå®šä¹‰createFormæ•ˆæœé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a314d9c0db14c9eaac6fd)

---

### å®šä¹‰ todo ç»„ä»¶

ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å¾…åŠäº‹é¡¹å†…å®¹ï¼Œæ¥ä¸‹æ¥å½“ç”¨æˆ·ç‚¹å‡»åŠ å…¥æŒ‰é’®çš„æ—¶å€™æˆ‘ä»¬è¦æŠŠä»–å±•ç¤ºåœ¨ä¸‹é¢ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠä¸‹é¢çš„ Todo éƒ½å†™æˆä¸€ä¸ªå•ç‹¬çš„ç»„ä»¶ï¼Œè·å–åˆ°è¾“å…¥çš„ä»£åŠäº‹é¡¹å¹¶å±•ç¤ºå‡ºæ¥ã€‚

æ–°å¢ todo è¾“å…¥æ¡†ç»„ä»¶ï¼šåœ¨ app ç›®å½•ä¸‹æ–°å»ºç»„ä»¶æ–‡ä»¶å¤¹ todoï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º todo.cssï¼Œtodo.htmlï¼Œtodo.js ä¸‰ä¸ªæ–‡ä»¶ã€‚
åœ¨ todo.html ä¸­ï¼Œé€šè¿‡`todo.content`å¯ä»¥è·å–å¹¶å±•ç¤º content ä¸­çš„å†…å®¹ï¼Œtodo.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class={containerClass}>
    <p>{todo.content}</p>
  </div>
</template>
```

åœ¨ todo.js ä¸­ï¼Œ é€šè¿‡ `@api todo` ä»å¤–éƒ¨æ¥æ”¶æ•°æ®ï¼Œå¹¶é€šè¿‡ `get containerClass()` è¿”å›ç”¨äºæ§åˆ¶æ ·å¼çš„â€œç±»åå­—ç¬¦ä¸²â€ï¼Œtodo.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, api } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @api todo;

  get containerClass() {
    return `todo ${this.todo.isCompleted ? 'completed' : ''}`;
  }
}
```

æœ€ååœ¨ todo.css ä¸­è¡¥å…… todo ç»„ä»¶çš„æ ·å¼ï¼Œtodo.css ä»£ç å¦‚ä¸‹ï¼š

```css
.todo {
  background-color: #3b36cc;
  height: 40px;
  padding: 0 10px;
  margin-top: 10px;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»åˆæ­¥å®Œæˆäº†äº† todo ç»„ä»¶çš„å®šä¹‰ï¼Œä½†æ˜¯ä¸ºäº†ä½¿å¾—å…¶ç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦æŠŠä»–å¼•å…¥åˆ° todoWrapper ç»„ä»¶ã€‚

æ¥ç€æˆ‘ä»¬éœ€è¦ä¿®æ”¹ todoWrapper.htmlï¼Œé€šè¿‡`<template for:each={todos} for:item="todo">`å¾ªç¯æŒ‡ä»¤å®ç°äº†å¾…åŠåˆ—è¡¨çš„åŠ¨æ€ç”Ÿæˆã€‚å®ƒé€šè¿‡éå† `todos` æ•°ç»„ï¼Œä¸ºæ¯ä¸€ä¸ªä»»åŠ¡è‡ªåŠ¨åˆ›å»ºå¹¶æ¸²æŸ“ä¸€ä¸ª `mycontrol-todo` å­ç»„ä»¶ã€‚å…¶ä¸­ï¼Œ`key` å±æ€§ä¸ºæ¯æ¡æ•°æ®æä¾›äº†å”¯ä¸€æ ‡è¯†ï¼Œç¡®ä¿äº†æ¡†æ¶åœ¨æ•°æ®å˜åŠ¨æ—¶èƒ½è¿›è¡Œé«˜æ•ˆçš„å¢é‡æ›´æ–°ã€‚

æœ€åä¸º`<mycontrol-create-form ></mycontrol-create-form>`æ·»åŠ `onaddtodo={handleAddTodo}`çš„äº‹ä»¶ç›‘å¬ï¼Œ å®ç°å­ç»„ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®ï¼Œå®Œæˆäº†ä»â€œå¤§è„‘â€åˆ°â€œå·¥äººâ€çš„æ•°æ®åˆ†å‘ï¼ŒtodoWrapper.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="wrapper">
    <h1>å¾…åŠäº‹é¡¹</h1>
    <mycontrol-create-form onaddtodo={handleAddTodo}></mycontrol-create-form>
    <template for:each={todos} for:item="todo">
      <mycontrol-todo key={todo.id} todo={todo}> </mycontrol-todo>
    </template>
  </div>
</template>
```

åŒæ­¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ todoWrapper.jsï¼Œ é¦–å…ˆé€šè¿‡ `@track` å®šä¹‰äº†ä¸€ä¸ªå“åº”å¼æ•°ç»„ä½œä¸ºåˆå§‹æ•°æ®æºï¼Œç¡®ä¿è§†å›¾èƒ½éšæ•°æ®çš„å˜åŠ¨å®æ—¶åˆ·æ–°ã€‚

åœ¨å¤„ç†"æ·»åŠ "çš„é€»è¾‘æ—¶ï¼Œ`handleAddTodo` å‡½æ•°é€šè¿‡ `event.detail` æ¥æ”¶å­ç»„ä»¶ä¼ æ¥çš„æ–°ä»»åŠ¡æ–‡å­—ï¼Œå¹¶ä¸ºå…¶ç”Ÿæˆä¸€ä¸ªåŸºäºæ—¶é—´æˆ³çš„å”¯ä¸€ IDã€‚æœ€åï¼Œåˆ©ç”¨ JavaScript çš„å±•å¼€è¿ç®—ç¬¦æ„å»ºä¸€ä¸ªæ–°çš„æ•°ç»„å‰¯æœ¬å¹¶é‡æ–°èµ‹å€¼ç»™ `this.todos`ï¼ŒtodoWrapper.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, track } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @track todos = [
    {
      content: 'æ‰“æ‰«å•æ‰€',
      id: 1,
      isCompleted: false
    },
    {
      content: 'å†™ä½œä¸š',
      id: 2,
      isCompleted: true
    },
  ];

  handleAddTodo(event) {
    const content = event.detail;
    if (!content) {
      return;
    }

    const newTodo = {
      content: content,
      id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä»£æ›¿ Math.random() é¿å… key å†²çª
      isCompleted: false
    };
    this.todos = [...this.todos, newTodo];
  }
}
```

æˆ‘ä»¬æå®šäº†çš„ todo ç»„ä»¶æ¥æ”¶å¹¶å±•ç¤ºå†…å®¹çš„èƒ½åŠ›åï¼Œè¿˜éœ€è¦è§£å†³ createForm ä¸­ä¼ å‡ºå†…å®¹çš„èƒ½åŠ›ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åˆ° createForm.html ä¸­ä¿®æ”¹ï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ŒcreateForm.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <form class="create-form" onsubmit={handleSubmit}>
    <kd-input
      type="text"
      class="input-field"
      placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹"
      value={content}
      onchange={handleInputChange}
    ></kd-input>
    <kd-button type="submit" class="submit-btn" onclick={handleSubmit}>æ·»åŠ </kd-button>
  </form>
</template>
```

å¯¹åº”çš„æˆ‘ä»¬æ¥ç€éœ€è¦åœ¨ createForm.js ä¸­å°è£…å¹¶æ´¾å‘ä»»åŠ¡æŒ‡ä»¤ ï¼Œé€šè¿‡`event.preventDefault()`é˜»æ­¢è¡¨å•é»˜è®¤åˆ·æ–°è¡Œä¸ºï¼Œ å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹ä½œä¸ºâ€œåŒ…è£¹â€æ´¾å‘ç»™çˆ¶ç»„ä»¶ï¼Œéšåæ¸…ç©ºè¾“å…¥æ¡†ä»¥å¤‡ä¸‹æ¬¡å½•å…¥ï¼ŒcreateForm.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement } from '@kdcloudjs/kwc';

export default class CreateForm extends KingdeeElement {
  content = '';

  handleInputChange(event) {
    this.content = event.target.value;
  }

  handleSubmit(event) {
    event.preventDefault();
    // å‘ä¸Šæ´¾å‘äº‹ä»¶ï¼Œå°†è¾“å…¥çš„å†…å®¹ä¼ ç»™çˆ¶ç»„ä»¶
    this.dispatchEvent(new CustomEvent('addtodo', { detail: this.content }));
    this.content = ''; // æ¸…ç©ºè¾“å…¥æ¡†
  }
}
```

ä½¿ç”¨`npm start`å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹å½“å‰çš„è¿è¡Œæ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥å°è¯•æ·»åŠ å¾…åŠäº‹é¡¹ï¼š

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šé¢„è§ˆå®šä¹‰todoç»„ä»¶æ•ˆæœé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a316507ad417580a830d8)

---

### åˆ é™¤ä¸çŠ¶æ€åˆ‡æ¢

å½“å‰è™½ç„¶å¯ä»¥æ·»åŠ ä»£åŠäº‹é¡¹ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•å¯¹å¾…åŠäº‹é¡¹è¿›è¡Œå…·ä½“çš„æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦è§£å†³ä»£åŠäº‹é¡¹çš„åˆ é™¤ä¸å®ŒæˆçŠ¶æ€çš„åˆ‡æ¢ã€‚

åœ¨ todo.html ä¸­ï¼Œé€šè¿‡`onclick={handleToggleComplete}`ç»™å¾…åŠäº‹é¡¹æ–‡æœ¬æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·åç»­å¯ä»¥é€šè¿‡ç‚¹å‡»æ–‡æœ¬å°†å¾…åŠäº‹é¡¹åˆ‡æ¢ä¸ºâ€œå·²å®Œæˆâ€æˆ–â€œæœªå®Œæˆâ€ã€‚
åœ¨`actions`å®¹å™¨ä¸­æ·»åŠ â€œç¼–è¾‘â€å’Œâ€œåˆ é™¤â€æŒ‰é’®ï¼Œæˆ‘ä»¬å…ˆä¸ºâ€œåˆ é™¤â€æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œtodo.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class={containerClass}>
    <p onclick={handleToggleComplete}>{todo.content}</p>
    <div class="actions">
      <span class="icon" title="Edit">âœ</span>
      <span class="icon delete-icon" onclick={handleDelete} title="Delete">ğŸ—‘</span>
    </div>
  </div>
</template>
```

æ¥ç€åˆ° todo.js ä¸­æ•æ‰ç”¨æˆ·åŠ¨ä½œå¹¶å‘ä¸Šæ´¾å‘ä¿¡å·ï¼Œ é€šè¿‡ `CustomEvent` å°è£…äº†åˆ‡æ¢çŠ¶æ€ï¼ˆ`togglecomplete`ï¼‰å’Œåˆ é™¤ï¼ˆ`delete`ï¼‰çš„æŒ‡ä»¤ï¼Œå¹¶å°†å½“å‰ä»»åŠ¡çš„ `id` ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼Œtodo.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, api } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @api todo;

  get containerClass() {
    return `todo ${this.todo.isCompleted ? 'completed' : ''}`;
  }
  handleToggleComplete() {
    this.dispatchEvent(
      new CustomEvent('togglecomplete', { detail: this.todo.id }),
    );
  }
  handleDelete() {
    this.dispatchEvent(new CustomEvent('delete', { detail: this.todo.id }));
  }
}
```

åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦åœ¨ todo.css ä¸­æ¸²æŸ“å·²å®ŒæˆçŠ¶æ€çš„äº‹é¡¹æ ·å¼ã€â€œç¼–è¾‘â€ä¸â€œåˆ é™¤â€æŒ‰é’®çš„æ ·å¼ï¼Œtodo,css ä»£ç å¦‚ä¸‹ï¼š

```css
.todo {
  background-color: #3b36cc;
  height: 40px;
  padding: 0 10px;
  margin-top: 10px;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
}
.completed {
  opacity: 0.4;
  text-decoration: line-through 3px black; /* kWC ä¸­å¯èƒ½éœ€è¦ç®€åŒ– CSS å…¼å®¹æ€§ */
  text-decoration-color: black;
  text-decoration-thickness: 3px;
}
.icon {
  cursor: pointer;
  font-size: 1.2rem;
  margin-left: 10px;
}
```

åœ¨ todoWrapper.html ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€å¼•å…¥çš„<mycontrol-todo></mycontrol-todo>ä¸­æ·»åŠ â€œåˆ é™¤â€ä¸â€œçŠ¶æ€åˆ‡æ¢â€äº‹ä»¶ï¼ŒtodoWrapper.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="wrapper">
    <h1>å¾…åŠäº‹é¡¹</h1>
    <mycontrol-create-form onaddtodo={handleAddTodo}></mycontrol-create-form>
    <template for:each={todos} for:item="todo">
      <mycontrol-todo
        key={todo.id}
        todo={todo}
        ondelete={handleDelete}
        ontogglecomplete={handleToggleComplete}>
      </mycontrol-todo>
    </template>
  </div>
</template>
```

æœ€åå¯¹åº”çš„éœ€è¦åœ¨ todoWrapper.js ä¸­è¡¥å……äº‹ä»¶é€»è¾‘ï¼Œ é€šè¿‡ `filter` æ–¹æ³•è¿‡æ»¤æ‰æŒ‡å®š ID çš„ä»»åŠ¡æ¥å®ç°åˆ é™¤åŠŸèƒ½ï¼Œå¹¶åˆ©ç”¨ `map` æ–¹æ³•é…åˆå±•å¼€è¿ç®—ç¬¦ç²¾ç¡®ä¿®æ”¹ç‰¹å®šä»»åŠ¡çš„å®ŒæˆçŠ¶æ€ï¼Œé€šè¿‡å¯¹ `this.todos` è¿›è¡Œé‡æ–°èµ‹å€¼ï¼ŒtodoWrapper.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, track } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @track todos = [
    {
      content: 'æ‰“æ‰«å•æ‰€',
      id: 1,
      isCompleted: false
    },
    {
      content: 'å†™ä½œä¸š',
      id: 2,
      isCompleted: true
    },
  ];

  handleAddTodo(event) {
    const content = event.detail;
    if (!content) {
      return;
    }

    const newTodo = {
      content: content,
      id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä»£æ›¿ Math.random() é¿å… key å†²çª
      isCompleted: false
    };
    this.todos = [...this.todos, newTodo];
  }
  handleDelete(event) {
    const id = event.detail;
    this.todos = this.todos.filter((todo) => todo.id !== id);
  }

  handleToggleComplete(event) {
    const id = event.detail;
    this.todos = this.todos.map((todo) =>
      todo.id === id ? { ...todo, isCompleted: !todo.isCompleted } : todo,
    );
  }
}
```

ä½¿ç”¨`npm start`å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹å½“å‰çš„è¿è¡Œæ•ˆæœï¼Œå¯ä»¥å°è¯•åˆ é™¤äº‹é¡¹ã€ç‚¹å‡»äº‹é¡¹æ–‡æœ¬åˆ‡æ¢äº‹é¡¹çŠ¶æ€ï¼š

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šåˆ é™¤ä¸çŠ¶æ€åˆ‡æ¢æ•ˆæœé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a317dc5602355134dccc9)

---

### å®šä¹‰ editForm ç»„ä»¶

è‡³æ­¤æˆ‘ä»¬çš„ä»£åŠäº‹é¡¹å·²åŸºæœ¬å®Œæˆï¼Œä¸è¿‡è¿˜æœ‰æœ€åè¿˜æœ‰ä¸€é¡¹ç¼–è¾‘çš„åŠŸèƒ½éœ€è¦å®Œæˆï¼Œè™½ç„¶å¯ä»¥æŠŠç¼–è¾‘çš„åŠŸèƒ½ä¹Ÿå†™åœ¨ todo ç»„ä»¶ä¸­ï¼Œä½†æ˜¯ç”±äºä»–ä»¬çš„ UI ä»¥åŠåŠŸèƒ½å®Œå…¨ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æŠŠç¼–è¾‘è¡¨å•çš„åŠŸèƒ½å†™åœ¨ç‹¬ç«‹çš„ editForm ç»„ä»¶ä¸­ä¼šæ˜¯æ¯”è¾ƒå¥½çš„åšæ³•ã€‚

æ–°å¢ editForm ç¼–è¾‘ç»„ä»¶ï¼šåœ¨ app ç›®å½•ä¸‹æ–°å»ºç»„ä»¶æ–‡ä»¶å¤¹ editFormï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º editForm.cssï¼ŒeditForm.htmlï¼ŒeditForm.js ä¸‰ä¸ªæ–‡ä»¶ã€‚
editForm ç»„ä»¶ä¸ createForm ç»„ä»¶éƒ½æœ‰è¾“å…¥æ¡†ä¸æŒ‰é’®ï¼Œå¯ä»¥å‚ç…§ createForm.html åœ¨ editForm.html ä¸­å¼•ç”¨åŸºç¡€ç»„ä»¶ `kd-input` å’Œ `kd-button`ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç¼–è¾‘ä¿®æ”¹åŠŸèƒ½ï¼ŒeditForm.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <form class="create-form">
    <kd-input
      type="text"
      placeholder="ç¼–è¾‘å¾…åŠäº‹é¡¹"
      value={content}
      onchange={handleInputChange}
      class="input-field"
    ></kd-input>
    <kd-button type="submit" class="submit-btn" onclick={handleSubmit}>å®Œæˆ</kd-button>
  </form>
</template>
```

åœ¨ editForm.js ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ç¼–è¾‘åŠŸèƒ½çš„é€»è¾‘å°è£…ï¼Œ é€šè¿‡ç”Ÿå‘½å‘¨æœŸé’©å­ `connectedCallback` åœ¨ç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨å›æ˜¾æ—§ä»»åŠ¡å†…å®¹ï¼Œç¡®ä¿ç”¨æˆ·èƒ½åœ¨åŸæ–‡å­—åŸºç¡€ä¸Šä¿®æ”¹ã€‚æäº¤æ—¶ï¼Œå®ƒå°†ä»»åŠ¡çš„ `id` ä¸ä¿®æ”¹åçš„ `content` å°è£…æˆå¯¹è±¡ä¸€åŒæ´¾å‘ç»™çˆ¶ç»„ä»¶ï¼Œä»è€Œå®ç°ç²¾å‡†çš„æ•°æ®æ›´æ–°ï¼ŒeditForm.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, api } from '@kdcloudjs/kwc';

export default class EditForm extends KingdeeElement {
  @api todo;
  content;

  connectedCallback() {
    // åˆå§‹åŒ–æ—¶å°† content è®¾ç½®ä¸º todo çš„å½“å‰å†…å®¹
    this.content = this.todo.content;
  }

  handleInputChange(event) {
    this.content = event.target.value;
  }

  handleSubmit(event) {
    event.preventDefault();
    // å‘ä¸Šæ´¾å‘ update äº‹ä»¶ï¼ŒåŒ…å« id å’Œæ–°å†…å®¹
    this.dispatchEvent(
      new CustomEvent('submitedit', {
        detail: {
          id: this.todo.id,
          content: this.content,
        },
      }),
    );
  }
}
```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ editForm.css ä¸­æ¸²æŸ“è¯¥ç»„ä»¶çš„æ ·å¼ï¼Œè¯¥éƒ¨åˆ†ä»£ç ä¸ createForm.css ä¸­çš„ç±»ä¼¼ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„ç¼–è¾‘çŠ¶æ€ä¸‹äº‹é¡¹çš„ä¸Šä¸‹é—´è·ï¼ŒeditForm.css ä»£ç å¦‚ä¸‹ï¼š

```css
.create-form {
  height: 40px;
  width: 100%;
  margin-bottom: 20px; /* ä¸ºäº†é€‚åº” todo åˆ—è¡¨çš„é—´è·å¾®è°ƒ */
  margin-top: 20px;
  border: 1px solid #3b36cc;
  display: flex;
}
.input-field {
  width: 100%;
  --kdds-c-input-background: none;
  --kdds-c-input-value-color: white;
  --kdds-c-input-border: transparent;
  --kdds-c-input-padding-vertical-medium: 8px;
}
.submit-btn {
  --kdds-c-button-padding-vertical-medium: 8px;
  --kdds-c-button-primary-background: #3b36cc;
  --kdds-c-button-primary-border: #3b36cc;
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ editForm ç»„ä»¶å·²ç»å®šä¹‰å®Œæˆï¼Œä½†æ˜¯è¿˜éœ€è¦æŠŠä»–ä¸å…¶ä»–ç»„ä»¶æ‹¼è£…èµ·æ¥ï¼Œå¹¶ä½¿å¾—å®ƒä¸å„ä¸ªç»„ä»¶ä¹‹é—´èƒ½æ²Ÿé€šä¸äº¤äº’ã€‚

å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦æŠŠ editForm ç»„ä»¶é€šè¿‡`<mycontrol-edit-form></mycontrol-edit-form>`å¼•å…¥åˆ° todo ç»„ä»¶ä¸­ï¼Œå¹¶æ·»åŠ çŠ¶æ€é€»è¾‘åˆ¤æ–­ï¼Œå½“ todo æ˜¯ç¼–è¾‘çŠ¶æ€æ—¶åˆ™æ˜¾ç¤º editForm ç»„ä»¶ï¼Œå¦åˆ™ todo å°±æ­£å¸¸æ˜¾ç¤ºå½“å‰å¾…åŠäº‹é¡¹çš„å†…å®¹ã€‚å¹¶ä¸”â€œç¼–è¾‘â€æŒ‰é’®ä½œä¸ºè§¦å‘ç¼–è¾‘çš„å…¥å£ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®ƒæ·»åŠ ä¸€ä¸ª`onclick={handleToggleEditing}`ç‚¹å‡»äº‹ä»¶ã€‚todo.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <template kwc:if={todo.isEditing}>
    <mycontrol-edit-form todo={todo} onsubmitedit={handleEditSubmit}>
    </mycontrol-edit-form>
  </template>

  <template kwc:else>
    <div class={containerClass}>
      <p onclick={handleToggleComplete}>{todo.content}</p>
      <div class="actions">
        <span class="icon" onclick={handleToggleEditing} title="Edit">âœ</span>
        <span class="icon delete-icon" onclick={handleDelete} title="Delete">ğŸ—‘</span>
      </div>
    </div>
  </template>
</template>
```

å¯¹åº”çš„æˆ‘ä»¬éœ€è¦å† todo,js ä¸­è¡¥å…… handleToggleEditing() ä¸ handleEditSubmit(event) ç”¨æˆ·æ•æ‰ç”¨æˆ·åŠ¨ä½œå¹¶å‘ä¸Šæ´¾å‘ä¿¡å·ï¼Œtodo.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, api } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @api todo;

  get containerClass() {
    return `todo ${this.todo.isCompleted ? 'completed' : ''}`;
  }
  handleToggleComplete() {
    this.dispatchEvent(
      new CustomEvent('togglecomplete', { detail: this.todo.id }),
    );
  }
  handleToggleEditing() {
    this.dispatchEvent(
      new CustomEvent('toggleediting', { detail: this.todo.id }),
    );
  }

  handleDelete() {
    this.dispatchEvent(new CustomEvent('delete', { detail: this.todo.id }));
  }

  // è¿™é‡Œæ˜¯è½¬å‘ EditForm å‘ä¸Šæ¥çš„äº‹ä»¶åˆ° TodoWrapper
  handleEditSubmit(event) {
    // äº‹ä»¶å†’æ³¡æˆ–è€…é‡æ–°æ´¾å‘ï¼Œè¿™é‡Œé€‰æ‹©é‡æ–°æ´¾å‘ä»¥ä¿æŒæ¸…æ™°
    this.dispatchEvent(new CustomEvent('edit', { detail: event.detail }));
  }
}
```

åœ¨ todoWrapper.html ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€å¼•å…¥çš„<mycontrol-todo></mycontrol-todo>ä¸­æ·»åŠ â€œåˆ‡æ¢ç¼–è¾‘â€ä¸â€œæ›´æ–°ä¿®æ”¹å†…å®¹â€äº‹ä»¶ï¼ŒtodoWrapper.html ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="wrapper">
    <h1>å¾…åŠäº‹é¡¹</h1>
    <mycontrol-create-form onaddtodo={handleAddTodo}></mycontrol-create-form>
    <template for:each={todos} for:item="todo">
      <mycontrol-todo
        key={todo.id}
        todo={todo}
        ondelete={handleDelete}
        ontogglecomplete={handleToggleComplete}
        ontoggleediting={handleToggleEditing}
        onedit={handleEditTodo}>
      </mycontrol-todo>
    </template>
  </div>
</template>
```

æœ€åå¯¹åº”çš„éœ€è¦åœ¨ todoWrapper.js ä¸­è¡¥å……äº‹ä»¶é€»è¾‘ï¼š`handleToggleEditing` é€šè¿‡å–å `isEditing` å±æ€§ï¼Œå®ç°ä»»åŠ¡åœ¨â€œå±•ç¤ºæ¨¡å¼â€ä¸â€œç¼–è¾‘æ¨¡å¼â€ä¹‹é—´çš„çµæ´»åˆ‡æ¢ã€‚è€Œ `handleEditTodo` åˆ™åœ¨ä¿å­˜ä¿®æ”¹æ—¶ï¼Œåˆ©ç”¨å¯¹è±¡è§£æ„è·å–æ–°å†…å®¹å¹¶æ›´æ–°æ•°ç»„ï¼ŒåŒæ—¶å¼ºåˆ¶å°† `isEditing` è®¾ä¸º `false` ä»¥é€€å‡ºç¼–è¾‘çŠ¶æ€ã€‚

å¯¹æå‰é¢„åˆ¶çš„æ•°æ®é€šè¿‡`isEditing: false`é»˜è®¤è®¾ç½®ä¸ºå±•ç¤ºæ–‡å­—ï¼ˆéç¼–è¾‘æ¨¡å¼ï¼‰ï¼ŒtodoWrapper.js ä»£ç å¦‚ä¸‹ï¼š

```javascript
import { KingdeeElement, track } from '@kdcloudjs/kwc';

export default class App extends KingdeeElement {
  @track todos = [
    {
      content: 'æ‰“æ‰«å•æ‰€',
      id: 1,
      isCompleted: false,
      isEditing: false
    },
    {
      content: 'å†™ä½œä¸š',
      id: 2,
      isCompleted: true,
      isEditing: false
    },
  ];

  handleAddTodo(event) {
    const content = event.detail;
    if (!content) {
      return;
    }

    const newTodo = {
      content: content,
      id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä»£æ›¿ Math.random() é¿å… key å†²çª
      isCompleted: false,
      isEditing: false
    };
    this.todos = [...this.todos, newTodo];
  }
  handleDelete(event) {
    const id = event.detail;
    this.todos = this.todos.filter((todo) => todo.id !== id);
  }

  handleToggleComplete(event) {
    const id = event.detail;
    this.todos = this.todos.map((todo) =>
      todo.id === id ? { ...todo, isCompleted: !todo.isCompleted } : todo,
    );
  }
  handleToggleEditing(event) {
    const id = event.detail;
    this.todos = this.todos.map((todo) =>
      todo.id === id ? { ...todo, isEditing: !todo.isEditing } : todo,
    );
  }

  handleEditTodo(event) {
    const { id, content } = event.detail;
    this.todos = this.todos.map((todo) =>
      todo.id === id ? { ...todo, content: content, isEditing: false } : todo,
    );
  }
}
```

ä½¿ç”¨`npm start`å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼ŒæŒ‰ç…§æç¤ºåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹å½“å‰çš„è¿è¡Œæ•ˆæœï¼Œå¯ä»¥å°è¯•ç¼–è¾‘å¾…åŠäº‹é¡¹å†…å®¹ï¼š

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼šå¾…åŠäº‹é¡¹æœ€ç»ˆæ•ˆæœé¢„è§ˆå›¾ -->

![image.png](https://tc-cdn.processon.com/po/684fa7adbc9bf7627b3e562d-695a319115bee62062d21158)

---

### æ”¶å°¾

æ­å–œä½ ï¼ä½ å·²ç»æˆåŠŸè‡ªå®šä¹‰äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„**å“åº”å¼å¾…åŠäº‹é¡¹ï¼ˆTodo Listï¼‰**ã€‚

ä½ å¯ä»¥æ ¹æ®ä»¥ä¸‹æ¸…å•æ£€æŸ¥ä½ çš„æˆæœï¼š

1. **æ·»åŠ ä»»åŠ¡**ï¼šè¾“å…¥æ–‡å­—æŒ‰å›è½¦æˆ–ç‚¹â€œæ·»åŠ â€ï¼Œåˆ—è¡¨å³åˆ»æ›´æ–°ã€‚
2. **çŠ¶æ€åˆ‡æ¢**ï¼šå‹¾é€‰ä»»åŠ¡åï¼Œæ–‡å­—è‡ªåŠ¨å‡ºç°åˆ é™¤çº¿æ•ˆæœã€‚
3. **ç¼–è¾‘åŠŸèƒ½**ï¼šç‚¹å‡»â€œç¼–è¾‘â€æŒ‰é’®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œä¸”è¾“å…¥æ¡†é¢„å¡«äº†åŸæœ‰å†…å®¹ã€‚
4. **åˆ é™¤ä»»åŠ¡**ï¼šç‚¹å‡»åˆ é™¤ï¼Œå¯¹åº”æ¡ç›®å¹³æ»‘ç§»é™¤ã€‚

å¦‚æœä½ æƒ³è¿›ä¸€æ­¥æå‡å¼€å‘æŠ€èƒ½ï¼Œæˆ–è€…åœ¨å®é™…é¡¹ç›®ä¸­åº”å¯¹æ›´å¤æ‚çš„åœºæ™¯ï¼Œæ¬¢è¿è®¿é—®æˆ‘ä»¬çš„ **[å¼€å‘æŒ‡å—]** æ¨¡å—~
